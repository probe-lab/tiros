version: "3.9"
name: tiros
services:
  ipfs:
    image: ipfs/kubo:v0.38.0
    entrypoint: []
    command: ["/bin/sh", "-c", "ipfs init; ipfs config Addresses.API /ip4/0.0.0.0/tcp/5001; ipfs config Provide.Strategy roots; ipfs daemon --migrate=true --agent-version-suffix=docker"]
    environment:
      - OTEL_EXPORTER_OTLP_ENDPOINT=http://host.docker.internal:4317
      - OTEL_EXPORTER_OTLP_INSECURE=true
      - OTEL_EXPORTER_OTLP_PROTOCOL=grpc
      - OTEL_SERVICE_NAME=kubo
      - OTEL_TRACES_EXPORTER=otlp
    ports:
      - "0.0.0.0:4001:4001/tcp"
      - "0.0.0.0:4001:4001/udp"
      - "0.0.0.0:5001:5001"